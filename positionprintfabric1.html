<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fabric Quantity Discount Calculator</title>
<style>
  body { font-family: sans-serif; background: #f9f9f9; padding: 20px; }
  .calculator {
    max-width: 400px; margin: 20px auto; padding: 20px;
    background: #fff; border: 1px solid #ddd; border-radius: 10px;
  }
  h3 { margin-bottom: 10px; }
  label { font-weight: 600; }
  input[type=number] { width: 100px; padding: 5px; margin-left: 10px; }
  button {
    background-color: #4CAF50; color: white; padding: 10px 20px;
    border: none; border-radius: 5px; cursor: pointer; font-size: 16px;
    margin-top: 10px;
  }
  button:hover { background-color: #45a049; }
  #result {
    margin-top: 20px; padding-top: 15px; border-top: 1px solid #ccc;
    text-align: center; color: #333;
  }
  #result p { margin: 8px 0; }
  #copyText {
    width: 100%; padding: 10px; margin-top: 10px;
    font-weight: bold; color: #333; border: 1px solid #ccc; border-radius: 5px;
    text-align: center;
  }
  a.pay-btn {
    display: inline-block; background-color: #4CAF50; color: white;
    padding: 12px 24px; text-decoration: none; border-radius: 8px;
    font-weight: bold; font-size: 16px; margin-top: 10px;
  }
  a.pay-btn:hover { background-color: #45a049; }
</style>
</head>
<body>

<h2>Fabric Sample</h2>
<img src="A11111490%20pure%20natural%20crepe%20position%20prit%20fabric%2044in%201.jpg" alt="Pure Natural Crepe Position Print Fabric" style="max-width:100%; height:auto;">

<div class="calculator">
  <h3>Quantity Discount Calculator</h3>
  <p style="color: #555; font-size: 14px; margin-bottom: 15px;">
    Increase Quantity For Better Rates.
  </p>

  <label for="quantity">Quantity (in meters):</label>
  <input type="number" id="quantity" step="1" min="1" max="9" value="1" />

  <button id="calculateBtn" type="button">Calculate</button>

  <div id="result"></div>
</div>

<script>
  // Static product data variables
  const purchase_rate = 500;       // Base rate
  const purchase_charges = 100;    // Additional charges
  const weight = 0.2;              // Weight per meter (not used in shipping as per your logic)
  const stock = 9;
  const min_qty = 1;

  const cost_per_item = purchase_rate + purchase_charges; // 600

  // Using fixed profit as 120 per your example
  const fixed_profit = 120;

  // Fixed shipping charge as 100 per your example
  const fixed_shipping = 100;

  function calculateTotal(cost, quantity) {
    const basicCost = cost * quantity; // cost * quantity
    const profit = fixed_profit * quantity; // profit per meter * quantity
    const shipping = fixed_shipping; // fixed shipping for all quantities

    const subtotal = basicCost + profit + shipping;
    const gst = subtotal * 0.05;
    const total = subtotal + gst;

    const pricePerMeter = total / quantity;

    return {
      total: total.toFixed(2),
      pricePerMeter: Math.ceil(pricePerMeter),
      resultText: Math.ceil(pricePerMeter) + " ₹ per meter for " + quantity + " meter"
    };
  }

  function calculateShipping() {
    const quantityInput = document.getElementById("quantity");
    const quantity = parseInt(quantityInput.value);

    if (!quantity || quantity < min_qty) {
      alert(`Please enter quantity greater than or equal to ${min_qty}.`);
      quantityInput.focus();
      return;
    }

    if (quantity > stock) {
      alert(`Quantity cannot be more than available stock (${stock}).`);
      quantityInput.value = stock;
      quantityInput.focus();
      return;
    }

    const calc = calculateTotal(cost_per_item, quantity);

    // Use total from calculation
    const finalTotalAmount = calc.total;

    document.getElementById("result").innerHTML = `
      <p style="font-size: 18px; margin: 10px 0; color: #333;"><strong>${calc.resultText}</strong></p>
      <p style="font-size: 20px; margin: 10px 0; color: #4CAF50;"><strong>Total Payable: ₹${finalTotalAmount}</strong></p>
      <input 
        type='text' 
        id='copyText' 
        value='${calc.resultText} | Total Payable: ₹${finalTotalAmount}' 
        readonly 
        style='width: 100%; padding: 10px; margin-top: 10px; text-align: center; font-size: 14px; font-weight: bold; color: #333; border: 1px solid #ccc; border-radius: 5px;'
      ><br>
      <a 
        href="https://amrutdresses.github.io/upi-payment-page/qrfixindex.html?amount=${finalTotalAmount}" 
        target="_blank" 
        class="pay-btn"
      >
        Pay Now via UPI
      </a>
    `;
  }

  document.addEventListener('DOMContentLoaded', function () {
    document.getElementById('calculateBtn').addEventListener('click', calculateShipping);
  });
</script>

</body>
</html>
